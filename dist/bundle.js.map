{"version":3,"file":"bundle.js","mappings":"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","sources":["webpack://v12-modern-virtual/./src/actions/getVirtualSelectionMarks.ts","webpack://v12-modern-virtual/./src/actions/virtualApplyBold.ts","webpack://v12-modern-virtual/./src/actions/virtualApplyMarksInRange.ts","webpack://v12-modern-virtual/./src/constants.ts","webpack://v12-modern-virtual/./src/debug/debugRenderVirtualDocument.ts","webpack://v12-modern-virtual/./src/debug/debugRenderVirtualInline.ts","webpack://v12-modern-virtual/./src/debug/debugUpdateUI.ts","webpack://v12-modern-virtual/./src/devirtualizeSelection.ts","webpack://v12-modern-virtual/./src/didVirtualNodeChange.ts","webpack://v12-modern-virtual/./src/domGenerateMarks.ts","webpack://v12-modern-virtual/./src/domIsSelectionInEditor.ts","webpack://v12-modern-virtual/./src/domIsValidDocument.ts","webpack://v12-modern-virtual/./src/helpers/clamp.ts","webpack://v12-modern-virtual/./src/helpers/closest.ts","webpack://v12-modern-virtual/./src/helpers/uid.ts","webpack://v12-modern-virtual/./src/index.ts","webpack://v12-modern-virtual/./src/init.ts","webpack://v12-modern-virtual/./src/listeners/attachListenerBoldBtn.ts","webpack://v12-modern-virtual/./src/listeners/attachListenerInput.ts","webpack://v12-modern-virtual/./src/listeners/attachListenerKeydown.ts","webpack://v12-modern-virtual/./src/listeners/attachListenerSelectionChange.ts","webpack://v12-modern-virtual/./src/render/domCreateNode.ts","webpack://v12-modern-virtual/./src/render/domUpdateHtmlProps.ts","webpack://v12-modern-virtual/./src/render/patch.ts","webpack://v12-modern-virtual/./src/render/render.ts","webpack://v12-modern-virtual/./src/trimVirtualBlockWhiteSpace.ts","webpack://v12-modern-virtual/./src/utils/getOrderedSelection.ts","webpack://v12-modern-virtual/./src/vCreateBlock.ts","webpack://v12-modern-virtual/./src/vCreateInline.ts","webpack://v12-modern-virtual/./src/vDocToVTree.ts","webpack://v12-modern-virtual/./src/vInlinesHaveSameMarks.ts","webpack://v12-modern-virtual/./src/virtualBuildIndex.ts","webpack://v12-modern-virtual/./src/virtualizeBlock.ts","webpack://v12-modern-virtual/./src/virtualizeDOM.ts","webpack://v12-modern-virtual/./src/virtualizeSelection.ts","webpack://v12-modern-virtual/webpack/bootstrap","webpack://v12-modern-virtual/webpack/before-startup","webpack://v12-modern-virtual/webpack/startup","webpack://v12-modern-virtual/webpack/after-startup"],"sourcesContent":["import getOrderedSelection from '../utils/getOrderedSelection';\n\nconst getIntersectingBlocks = (\n  virtualBlocks: VirtualBlock[],\n  virtualIndex: VirtualIndex,\n  startPosition: number,\n  endPosition: number,\n) => {\n  return virtualBlocks.filter((block, i) => {\n    const { globalPosition, length } = virtualIndex.blocks[i];\n    const blockStart = globalPosition;\n    const blockEnd = blockStart + length;\n\n    return startPosition < blockEnd && blockStart < endPosition;\n  });\n};\n\nconst getIntersectingInlines = (\n  virtualInlines: VirtualInline[],\n  virtualIndex: VirtualIndex,\n  startPosition: number,\n  endPosition: number,\n) => {\n  return virtualInlines.filter((_, i) => {\n    const inline = virtualInlines[i];\n    const { globalPosition, length } = virtualIndex.inlineById.get(inline.id)!;\n    const inlineStart = globalPosition;\n    const inlineEnd = inlineStart + length;\n\n    return startPosition < inlineEnd && inlineStart < endPosition;\n  });\n};\n\nconst getVirtualSelectionMarks = (state: State): Record<string, any> => {\n  const { virtualSelection, virtualDocument, virtualIndex } = state;\n  if (\n    !virtualSelection ||\n    !virtualDocument ||\n    !virtualIndex ||\n    !virtualSelection.isInsideEditor\n  ) {\n    return {};\n  }\n\n  const { startPosition, endPosition } = getOrderedSelection(virtualSelection);\n\n  let virtualBlocks = virtualDocument?.blocks || [];\n\n  const blocks = getIntersectingBlocks(\n    virtualBlocks,\n    virtualIndex,\n    startPosition,\n    endPosition,\n  );\n\n  if (blocks.length === 0) {\n    return {};\n  }\n\n  const markTracker = {} as Record<string, number>;\n\n  const inlines = blocks\n    .map((block, i) => {\n      const virtualInlines = blocks[i].children || [];\n\n      if (i === 0 || i === blocks.length - 1) {\n        return getIntersectingInlines(\n          virtualInlines,\n          virtualIndex,\n          startPosition,\n          endPosition,\n        );\n      }\n\n      return virtualInlines;\n    })\n    .flat();\n\n  for (const inline of inlines) {\n    // TODO: change from hardcoded marks to dynamic from global state\n    for (const mark of ['bold']) {\n      // Mark as 2 if present, 1 if absent\n      const markTrackerValue = !!inline?.marks?.[mark] ? 2 : 1;\n      if (!markTracker[mark]) {\n        markTracker[mark] = markTrackerValue;\n      } else {\n        markTracker[mark] = markTracker[mark] | markTrackerValue;\n      }\n    }\n  }\n\n  const virtualSelectionMarks: Record<string, 'true' | 'false' | 'mixed'> = {};\n\n  // Determine final mark states\n  for (const mark in markTracker) {\n    // 2 = all present, 1 = all absent, 3 = mixed\n    if (markTracker[mark] === 2) {\n      virtualSelectionMarks[mark] = 'true';\n    } else if (markTracker[mark] === 1) {\n      virtualSelectionMarks[mark] = 'false';\n    } else {\n      virtualSelectionMarks[mark] = 'mixed';\n    }\n  }\n\n  return virtualSelectionMarks;\n};\n\nexport default getVirtualSelectionMarks;\n","import virtualApplyMarksInRange from './virtualApplyMarksInRange';\n\nconst virtualApplyBold = (state: State) => {\n  const { virtualSelection } = state;\n\n  if (!virtualSelection) return state;\n  // If selection is collapsed, do nothing. TODO: expand to apply/remove bold mark\n  if (virtualSelection.isCollapsed) {\n    return state;\n  }\n  // Check if selection is already bolded\n  const isBolded = virtualSelection.marks?.bold === 'true';\n  // Apply or remove bold mark based on current state\n  virtualApplyMarksInRange(state, { bold: !isBolded });\n};\n\nexport default virtualApplyBold;\n","import uid from '../helpers/uid';\nimport { clamp } from '../helpers/clamp';\nimport vCreateInline from '../vCreateInline';\nimport vInlinesHaveSameMarks from '../vInlinesHaveSameMarks';\nimport getOrderedSelection from '../utils/getOrderedSelection';\nimport virtualBuildIndex from '../virtualBuildIndex';\nimport { virtualizeSelection } from '../virtualizeSelection';\n\nconst virtualApplyMarksInline = (\n  virtualInlines: VirtualInline[],\n  inlinesIndex: VirtualInlineIndex[],\n  startPosition: number,\n  endPosition: number,\n  marksToApply: Record<string, boolean>,\n): VirtualInline[] => {\n  const newInlines = [] as VirtualInline[];\n\n  for (let i = 0; i < virtualInlines.length; i++) {\n    const inline = virtualInlines[i];\n    const { globalPosition, length } = inlinesIndex[i];\n    const inlineLength = inline.text.length;\n\n    if (globalPosition + length < startPosition) {\n      newInlines.push(inline);\n      continue;\n    }\n\n    if (endPosition < globalPosition) {\n      newInlines.push(inline);\n      continue;\n    }\n\n    const cutStart = clamp(startPosition - globalPosition, 0, inlineLength);\n    const cutEnd = clamp(endPosition - globalPosition, 0, inlineLength);\n\n    if (cutEnd < cutStart) {\n      throw new Error(`Unexpected cutEnd < cutStart: ${cutEnd} < ${cutStart}`);\n    }\n\n    if (cutStart > 0) {\n      newInlines.push({\n        ...inline,\n        id: uid(),\n        text: inline.text.slice(0, cutStart),\n      });\n    }\n\n    newInlines.push({\n      ...inline,\n      id: uid(),\n      text: inline.text.slice(cutStart, cutEnd),\n      marks: {\n        ...inline.marks,\n        ...marksToApply,\n      },\n    });\n\n    if (cutEnd < inlineLength) {\n      newInlines.push({\n        ...inline,\n        id: uid(),\n        text: inline.text.slice(cutEnd),\n      });\n    }\n  }\n\n  // Merge adjacent inlines with same marks\n  const mergedInlines = [] as VirtualInline[];\n  for (let i = 0; i < newInlines.length; i++) {\n    const inline = newInlines[i];\n    const topMergedInline = mergedInlines[mergedInlines.length - 1];\n    if (topMergedInline && vInlinesHaveSameMarks(topMergedInline, inline)) {\n      topMergedInline.text += inline.text;\n    } else {\n      mergedInlines.push(inline);\n    }\n  }\n\n  return mergedInlines;\n};\n\nconst virtualApplyMarksInRange = (\n  state: State,\n  marksToApply: Record<string, boolean>,\n) => {\n  const { virtualSelection, virtualDocument, virtualIndex } = state;\n  if (\n    !virtualSelection ||\n    !virtualDocument ||\n    !virtualSelection.isInsideEditor\n  ) {\n    return;\n  }\n\n  const { startPosition, endPosition } = getOrderedSelection(virtualSelection!);\n\n  let newBlocks = [] as VirtualBlock[];\n  const virtualBlocks = virtualDocument.blocks ?? [];\n\n  for (let i = 0; i < virtualBlocks.length; i++) {\n    const block = virtualBlocks[i];\n    const { length, globalPosition, inlines } = virtualIndex?.blocks[i]!;\n\n    if (globalPosition + length < startPosition) {\n      newBlocks.push(block);\n      continue;\n    }\n\n    if (endPosition < globalPosition) {\n      newBlocks.push(block);\n      continue;\n    }\n\n    newBlocks.push({\n      ...block,\n      children: virtualApplyMarksInline(\n        block.children,\n        inlines,\n        startPosition,\n        endPosition,\n        marksToApply,\n      ),\n    });\n  }\n\n  state.virtualDocument = {\n    type: 'document',\n    blocks: newBlocks,\n  };\n\n  state.virtualIndex = virtualBuildIndex(state);\n  state.virtualSelection = virtualizeSelection(state);\n};\n\nexport default virtualApplyMarksInRange;\n","export const CHAR_ZERO_WIDTH_SPACE = '\\u200b';\nexport const CHAR_NEW_LINE = '\\n';\n","import { clamp } from '../helpers/clamp';\nimport getOrderedSelection from '../utils/getOrderedSelection';\nimport debugRenderVirtualInline from './debugRenderVirtualInline';\n\nconst getUnderscoreLine = (\n  block: VirtualBlock,\n  blockIndex: VirtualBlockIndex,\n  startPosition: number,\n  endPosition: number,\n) => {\n  const { globalPosition } = blockIndex;\n\n  if (globalPosition + blockIndex.length < startPosition) {\n    return undefined;\n  }\n\n  if (endPosition < globalPosition) {\n    return undefined;\n  }\n\n  return block.children.map((inline, j) => {\n    const { globalPosition } = blockIndex.inlines[j];\n    const inlineLength = inline.text.length;\n\n    if (globalPosition + inlineLength < startPosition) {\n      return '&nbsp;'.repeat(inlineLength);\n    }\n\n    if (endPosition < globalPosition) {\n      return '';\n    }\n\n    const cutStart = clamp(startPosition - globalPosition, 0, inlineLength);\n    const cutEnd = clamp(endPosition - globalPosition, 0, inlineLength);\n\n    let underscoreLine = '';\n\n    if (startPosition == endPosition) {\n      if (cutEnd === inlineLength) {\n        return '&nbsp;'.repeat(cutStart);\n      } else {\n        return '&nbsp;'.repeat(cutStart) + '^';\n      }\n    } else {\n      if (0 < cutStart) {\n        underscoreLine += '&nbsp;'.repeat(cutStart);\n      }\n\n      if (cutEnd > cutStart) {\n        underscoreLine += '^'.repeat(cutEnd - cutStart);\n      }\n    }\n\n    return underscoreLine;\n  });\n};\n\nconst debugRenderVirtualDocument = (state: State) => {\n  try {\n    const { virtualDocument, virtualSelection, virtualIndex } = state;\n\n    const textBlocks = virtualDocument.blocks.map((block) =>\n      block.children.map(debugRenderVirtualInline).join(''),\n    );\n\n    if (\n      !virtualIndex ||\n      !virtualSelection ||\n      !virtualSelection.isInsideEditor\n    ) {\n      return textBlocks\n        .map((tb) => `<p class=\"whitespace-pre\">${tb}</p>`)\n        .join('');\n    }\n\n    const { startPosition, endPosition } =\n      getOrderedSelection(virtualSelection);\n\n    const underscoreLines = virtualDocument.blocks.map((block, i) => {\n      return getUnderscoreLine(\n        block,\n        virtualIndex.blocks[i],\n        startPosition,\n        endPosition,\n      );\n    });\n\n    let finalDebugRender = '';\n    for (let i = 0; i < textBlocks.length; i++) {\n      finalDebugRender += `<p class=\"whitespace-pre\">${textBlocks[i]}</p>`;\n      if (underscoreLines[i]) {\n        finalDebugRender += `<p>${underscoreLines[i]?.join('')}</p>`;\n      }\n    }\n\n    return finalDebugRender;\n  } catch (error) {\n    return error instanceof Error ? error.message : String(error);\n  }\n};\n\nexport default debugRenderVirtualDocument;\n","const debugRenderVirtualInline = (inline: VirtualInline): string => {\n  if (inline?.marks?.bold) {\n    return `<b class=\"text-[red]\">${inline.text}</b>`;\n  }\n\n  return inline.text;\n};\n\nexport default debugRenderVirtualInline;\n","import debugRenderVirtualDocument from './debugRenderVirtualDocument';\n\nconst debugUpdateUI = (state: State) => {\n  document.getElementById('cell-in-editor')!.innerText = state.virtualSelection\n    ?.isInsideEditor\n    ? 'In editor'\n    : 'Out of editor';\n\n  if (state.virtualSelection?.isInsideEditor) {\n    document.getElementById('cell-is-collapsed')!.innerText = state\n      .virtualSelection?.isCollapsed\n      ? 'Collapsed'\n      : 'Not collapsed';\n    document.getElementById('cell-range')!.innerText = [\n      String(state.virtualSelection.anchor ?? 'N/A') || 'N/A',\n      String(state.virtualSelection.focus ?? 'N/A') || 'N/A',\n    ].join('  ');\n  } else {\n    document.getElementById('cell-is-collapsed')!.innerText = '';\n    document.getElementById('cell-range')!.innerText = '';\n  }\n\n  document.getElementById(`cell-marks`)!.innerText = Object.entries(\n    state.virtualSelection?.marks || {},\n  )\n    .map(([mark, isActive]) => {\n      return isActive != 'false' ? mark : ``;\n    })\n    .join(' ');\n\n  // New: write formatted virtual document JSON\n  const virtualDocEl = document.getElementById('virtual-document-json')!;\n  virtualDocEl.innerHTML = debugRenderVirtualDocument(state);\n};\n\nexport default debugUpdateUI;\n","import { CHAR_ZERO_WIDTH_SPACE } from './constants';\nimport { clamp } from './helpers/clamp';\n\nconst virtualPositionToBlockOffset = (\n  index: VirtualIndex,\n  position: number,\n) => {\n  // Clamp position to valid range\n  const p = clamp(position, 0, index.globalLength);\n\n  // Find block containing position\n  for (const b of index.blocks) {\n    if (p <= b.globalPosition + b.length) {\n      return {\n        blockIndex: b.blockIndex,\n        inBlockOffset: p - b.globalPosition,\n      };\n    }\n  }\n\n  // Fallback end of last block\n  const lastBlock = index.blocks[index.blocks.length - 1];\n  return {\n    blockIndex: lastBlock.blockIndex,\n    inBlockOffset: lastBlock.length,\n  };\n};\n\nconst virtualBlockOffsetToInline = (\n  vDoc: VirtualDocument,\n  blockIndex: number,\n  inBlockOffset: number,\n) => {\n  const block = vDoc.blocks[blockIndex];\n  const inlines = block?.children ?? [];\n\n  let blockPosition = 0;\n  for (const inline of inlines) {\n    if (inBlockOffset <= blockPosition + inline.text.length) {\n      return {\n        inline,\n        inInlineOffset: inBlockOffset - blockPosition,\n      };\n    }\n\n    blockPosition += inline.text.length;\n  }\n\n  // Fallback of last inline\n  const lastInline = inlines[inlines.length - 1];\n  return {\n    inline: lastInline,\n    inInlineOffset: lastInline.text.length,\n  };\n};\n\nconst devirtualizePosition = (\n  state: State,\n  position: number,\n): DomPoint | null => {\n  const { blockIndex, inBlockOffset } = virtualPositionToBlockOffset(\n    state.virtualIndex!,\n    position,\n  );\n\n  const { inline, inInlineOffset } = virtualBlockOffsetToInline(\n    state.virtualDocument!,\n    blockIndex,\n    inBlockOffset,\n  );\n\n  const esc = CSS?.escape\n    ? CSS.escape(inline.id)\n    : inline.id.replace(/\"/g, '\\\\\"');\n  const inlineElement = state.editor.element.querySelector(\n    `[data-id=\"${esc}\"]`,\n  );\n  if (!inlineElement) {\n    console.error('Inline element not found for id: ' + inline.id);\n    return null;\n  }\n\n  // If not text node return null\n  const textNode = inlineElement.firstChild;\n  if (!textNode || textNode.nodeType !== Node.TEXT_NODE) {\n    console.error('Inline element does not contain text node: ' + inline.id);\n    return null;\n  }\n\n  //\n  const rawText = textNode.nodeValue ?? '';\n  const maxOffset = rawText == CHAR_ZERO_WIDTH_SPACE ? 0 : rawText.length;\n  const offset = clamp(inInlineOffset, 0, maxOffset);\n\n  return {\n    node: textNode,\n    offset,\n  };\n};\n\nconst devirtualizeSelection = (state: State) => {\n  const { virtualSelection } = state;\n\n  // Get selection object\n  const selection = window.getSelection();\n  if (!selection || !virtualSelection) return;\n\n  // Convert virtual positions to DOM positions\n  const anchorPos = devirtualizePosition(state, virtualSelection.anchor!);\n  const focusPos = devirtualizePosition(state, virtualSelection.focus!);\n\n  // If positions are invalid, do nothing\n  if (!anchorPos || !focusPos) return;\n\n  // Update selection by clearing existing ranges and adding new range\n  selection.removeAllRanges();\n  selection.setBaseAndExtent(\n    anchorPos.node,\n    anchorPos.offset,\n    focusPos.node,\n    focusPos.offset,\n  );\n};\n\nexport default devirtualizeSelection;\n","const didVirtualNodeChange = (\n  oldNode: VirtualTreeNode,\n  newNode: VirtualTreeNode,\n) => {\n  return (\n    oldNode.type !== newNode.type ||\n    (oldNode.type == 'element' &&\n      (oldNode.tag !== (newNode as VirtualTreeElement).tag! ||\n        oldNode.key !== (newNode as VirtualTreeElement).key!))\n  );\n};\n\nexport default didVirtualNodeChange;\n","import closest from './helpers/closest';\n\nconst domGenerateMarks = (node: Node): Record<string, any> => {\n  const marks: Record<string, any> = {};\n\n  // If parent is bold element\n  const boldElement = closest(node, 'strong, b');\n  if (boldElement) {\n    marks.bold = true;\n  }\n\n  // TODO: expand for other marks\n  // // If parent is italic element\n  // const italicElement = closest(node, 'em, i');\n  // if (italicElement) {\n  //   marks.italic = true;\n  // }\n\n  // // If parent is underline element\n  // const underlineElement = closest(node, 'u');\n  // if (underlineElement) {\n  //   marks.underline = true;\n  // }\n\n  // // If parent is code element\n  // const codeElement = closest(node, 'code');\n  // if (codeElement) {\n  //   marks.code = true;\n  // }\n\n  // // If parent is link element\n  // const linkElement = closest(node, 'a');\n  // if (linkElement) {\n  //   const anchor = linkElement as HTMLAnchorElement;\n  //   marks.link = {\n  //     href: anchor.getAttribute('href') || '',\n  //     title: anchor.getAttribute('title') || '',\n  //   };\n  // }\n\n  return marks;\n};\n\nexport default domGenerateMarks;\n","export function domIsSelectionInEditor(\n  sel: Selection,\n  editorElement: HTMLElement,\n): boolean {\n  if (!sel || sel.rangeCount === 0) return false;\n  return (\n    editorElement.contains(sel.anchorNode) &&\n    editorElement.contains(sel.focusNode)\n  );\n}\n","export function domIsValidList(listElement: HTMLElement): boolean {\n  const listTags = new Set(['UL', 'OL']);\n\n  // Check if it's an allowed list-level element\n  if (!listTags.has(listElement.tagName)) {\n    return false;\n  }\n\n  // Ensure childNodes are only LI elements\n  for (const listItemNode of Array.from(listElement.childNodes)) {\n    // Ignore white space\n    if (\n      listItemNode.nodeType === Node.TEXT_NODE &&\n      /^\\s*$/.test(listItemNode.textContent || '')\n    ) {\n      continue;\n    }\n    // If not an element node at this point, invalid\n    if (listItemNode.nodeType !== Node.ELEMENT_NODE) {\n      return false;\n    }\n\n    // Check if it's an LI element\n    const listItemElement = listItemNode as HTMLElement;\n    if (listItemElement.tagName !== 'LI') {\n      return false;\n    }\n\n    // Check children of LI for valid inline content\n    const inlineElements = Array.from(listItemElement.childNodes);\n    for (const inlineElement of inlineElements) {\n      if (!domIsValidInline(inlineElement)) {\n        return false;\n      }\n    }\n  }\n  // All checks passed\n  return true;\n}\n\nexport function domIsValidInline(inlineNode: Node): boolean {\n  const inlineTags = new Set([\n    'SPAN',\n    'STRONG',\n    'EM',\n    'U',\n    'A',\n    'CODE',\n    'B',\n    'I',\n    'SUB',\n    'SUP',\n    'BR',\n  ]);\n  // Text nodes are allowed at root level\n  if (inlineNode.nodeType === Node.TEXT_NODE) {\n    return true;\n  }\n  // If not an element node at this point, invalid\n  if (inlineNode.nodeType !== Node.ELEMENT_NODE) {\n    return false;\n  }\n\n  const inlineElement = inlineNode as HTMLElement;\n\n  // If br element and has no children, valid\n  if (inlineElement.tagName === 'BR') {\n    return inlineElement.childNodes.length === 0;\n  }\n\n  // Check if it's an allowed inline-level element\n  if (!inlineTags.has(inlineElement.tagName)) {\n    return false;\n  }\n\n  // TODO: switch to iterative approach\n  // Check children recursively\n  for (const childNode of Array.from(inlineElement.childNodes)) {\n    if (!domIsValidInline(childNode)) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nexport function domIsValidBlock(blockNode: Node): boolean {\n  const allowedBlockTags = new Set([\n    'P',\n    // 'H1',\n    // 'H2',\n    // 'H3',\n    // 'H4',\n    // 'H5',\n    // 'H6',\n    // 'UL',\n    // 'OL',\n    // 'LI',\n    // 'BLOCKQUOTE',\n    // 'PRE',\n    // 'DIV',\n    // 'HR',\n  ]);\n\n  // Text nodes are allowed at root level\n  if (blockNode.nodeType === Node.TEXT_NODE) {\n    return true;\n  }\n  // If not an element node at this point, invalid\n  if (blockNode.nodeType !== Node.ELEMENT_NODE) {\n    return false;\n  }\n\n  const blockElement = blockNode as HTMLElement;\n  // Check if it's an allowed block-level element\n  if (!allowedBlockTags.has(blockElement.tagName)) {\n    return false;\n  }\n\n  if (blockElement.tagName === 'UL' || blockElement.tagName === 'OL') {\n    return domIsValidList(blockElement);\n  }\n\n  // TODO: switch to iterative approach\n  // Check for invalid nesting (e.g., block elements inside inline elements)\n  for (const inlineElement of Array.from(blockElement.childNodes)) {\n    if (!domIsValidInline(inlineElement)) {\n      return false;\n    }\n  }\n  // All checks passed\n  return true;\n}\n\nexport function domIsValidDocument(editorElement: HTMLElement): boolean {\n  for (const blockNode of Array.from(editorElement.childNodes)) {\n    if (!domIsValidBlock(blockNode)) {\n      return false;\n    }\n  }\n  return true;\n}\n","/**\n * Clamps a number between a minimum and maximum value.\n * @param value - The number to clamp\n * @param min - The minimum value\n * @param max - The maximum value\n * @returns The clamped value\n */\nexport function clamp(value: number, min: number, max: number): number {\n  return Math.min(Math.max(value, min), max);\n}","/**\n * Finds the closest ancestor element that matches the specified selector.\n * Handles both element nodes and text nodes by traversing up the DOM tree.\n *\n * @param {Node|null} node - The starting node to search from\n * @param {string} selector - CSS selector string to match against ancestor elements\n * @returns {Element|null} The closest ancestor element that matches the selector, or null if none found\n *\n * @example\n * // Find closest list element\n * const div = closest(textNode, 'ul, ol');\n *\n * @example\n * // Find closest element with class\n * const container = closest(element, '.container');\n */\nconst closest = (node: Node | null, selector: string): Element | null => {\n  if (node == null) return null;\n\n  if (node.nodeType === Node.TEXT_NODE && node.parentElement != null) {\n    return node.parentElement.closest(selector);\n  }\n  return (node as Element).closest(selector);\n};\n\nexport default closest;\n","let uid;\n\nif (\n  window.hasOwnProperty('crypto') &&\n  typeof window.crypto.randomUUID === 'function'\n) {\n  uid = () => {\n    return window.crypto.randomUUID();\n  };\n} else {\n  // uid = () => {\n  //   // Fallback: generate pseudo-random UID\n  //   return 'xxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n  //     const r = (Math.random() * 16) | 0,\n  //       v = c == 'x' ? r : (r & 0x3) | 0x8;\n  //     return v.toString(16);\n  //   });\n  // };\n\n  uid = () => {\n    return 'id_' + Math.random().toString(16).slice(2);\n  };\n}\n\nexport default uid as () => string;\n","import debugUpdateUI from './debug/debugUpdateUI';\nimport init from './init';\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  // const editor = document.getElementById('editor') as HTMLDivElement | null;\n  // const boldBtn = document.getElementById('boldBtn') as HTMLButtonElement | null;\n\n  // console.log(document.querySelector('#editor')?.innerHTML);\n  const state = init('#editor', {\n    bold: { selector: '#boldBtn' },\n  });\n  // @ts-ignore\n  window.state = state;\n  debugUpdateUI(state);\n  console.log(state);\n  console.log(9123);\n});\n","import attachListenerBoldBtn from './listeners/attachListenerBoldBtn';\nimport attachListenerInput from './listeners/attachListenerInput';\nimport attachListenerKeydown from './listeners/attachListenerKeydown';\nimport attachListenerSelectionChange from './listeners/attachListenerSelectionChange';\nimport { domIsValidDocument } from './domIsValidDocument';\nimport render from './render/render';\nimport virtualBuildIndex from './virtualBuildIndex';\nimport virtualizeDOM from './virtualizeDOM';\nimport { virtualizeSelection } from './virtualizeSelection';\n\nfunction init(\n  editorSelector: string,\n  options: Record<string, { selector: string }> = {},\n): State {\n  // Validate editor element\n  const editorElement = document.querySelector(editorSelector) as HTMLElement;\n  if (!editorElement) {\n    throw new Error(`Editor element not found for selector: ${editorSelector}`);\n  }\n\n  // If invalid DOM structure, throw error\n  if (!domIsValidDocument(editorElement)) {\n    throw new Error(\n      'Invalid DOM structure in editor of: ' + editorElement.innerHTML,\n    );\n  }\n\n  const state = {\n    editor: {\n      selector: editorSelector,\n      element: editorElement,\n    },\n  } as State;\n\n  state.virtualDocument = virtualizeDOM(editorElement, {\n    trimBlockWhiteSpace: true,\n    shrinkConsecutiveSpaces: true,\n    convertNewlinesToSpaces: true,\n  });\n  state.virtualIndex = virtualBuildIndex(state);\n  state.virtualSelection = virtualizeSelection(state);\n\n  attachListenerSelectionChange(state);\n  attachListenerKeydown(state);\n  attachListenerInput(state);\n\n  if (options.bold) {\n    attachListenerBoldBtn(state, options.bold.selector);\n  }\n\n  render(state);\n\n  return state;\n}\n\nexport default init;\n","import virtualApplyBold from '../actions/virtualApplyBold';\nimport render from '../render/render';\nimport debugUpdateUI from '../debug/debugUpdateUI';\n\nfunction attachListenerBoldBtn(state: State, boldBtnSelector: string) {\n  // If no selector defined, skip\n  const hasSelector = (boldBtnSelector?.length ?? 0) > 0;\n  if (!hasSelector) return;\n  // Attach listener\n  const boldBtn = document.querySelector(boldBtnSelector) as HTMLElement;\n  // If button not found, throw error\n  if (!boldBtn) {\n    throw new Error(`Bold button not found for selector: ${boldBtnSelector}`);\n  }\n  // Attach click listener\n  boldBtn.addEventListener('click', () => {\n    virtualApplyBold(state);\n    render(state);\n    debugUpdateUI(state);\n  });\n}\n\nexport default attachListenerBoldBtn;\n","import render from '../render/render';\nimport { clamp } from '../helpers/clamp';\nimport virtualBuildIndex from '../virtualBuildIndex';\nimport virtualizeDOM from '../virtualizeDOM';\nimport { virtualizeSelection } from '../virtualizeSelection';\nimport debugUpdateUI from '../debug/debugUpdateUI';\n\nconst attachListenerInput = (state: State) => {\n  const editorElement = state.editor.element;\n\n  editorElement.addEventListener('input', (event: Event) => {\n    state.virtualDocument = virtualizeDOM(state.editor.element);\n    state.virtualIndex = virtualBuildIndex(state);\n    const vSel = virtualizeSelection(state);\n\n    state.virtualSelection = {\n      ...vSel,\n      anchor: clamp(vSel.anchor ?? 0, 0, state.virtualIndex?.globalLength ?? 0),\n      focus: clamp(vSel.focus ?? 0, 0, state.virtualIndex?.globalLength ?? 0),\n    };\n\n    render(state);\n    debugUpdateUI(state);\n  });\n};\nexport default attachListenerInput;\n","import virtualApplyBold from '../actions/virtualApplyBold';\nimport render from '../render/render';\n\nconst attachListenerKeydown = (state: State) => {\n  const editor = state.editor.element!;\n  // Keyboard shortcut (Ctrl/Cmd + B)\n  editor.addEventListener('keydown', (e: KeyboardEvent) => {\n    if ((e.ctrlKey || e.metaKey) && e.key === 'b') {\n      e.preventDefault();\n      virtualApplyBold(state);\n      render(state);\n    }\n  });\n};\n\nexport default attachListenerKeydown;\n","import debugUpdateUI from '../debug/debugUpdateUI';\nimport { virtualizeSelection } from '../virtualizeSelection';\n\nfunction attachListenerSelectionChange(state: State) {\n  // Update button state on selection change\n  document.addEventListener('selectionchange', () => {\n    state.virtualSelection = virtualizeSelection(state);\n    debugUpdateUI(state);\n  });\n}\nexport default attachListenerSelectionChange;\n","const domCreateNode = (node: VirtualTreeNode): Node => {\n  // If text node, create text node\n  if (node.type == 'text') return document.createTextNode(node.text);\n  // Else, element node\n  const element = document.createElement(node.tag!);\n  // Set HTML attributes\n  for (const [key, value] of Object.entries(node.props!)) {\n    element.setAttribute(key, String(value));\n  }\n  // Recursively create and append child nodes\n  const children = node?.children ?? [];\n  for (const child of children) {\n    element.appendChild(domCreateNode(child));\n  }\n  // Return created element\n  return element;\n};\n\nexport default domCreateNode;\n","function domUpdateHtmlProps(\n  oldNode: VirtualTreeElement,\n  newNode: VirtualTreeElement,\n  oldElement: HTMLElement,\n) {\n  const oldProps = oldNode.props ?? {};\n  const newProps = newNode.props ?? {};\n\n  // Remove attributes that don't exist anymroe\n  for (const key of Object.keys(oldProps)) {\n    if (!newProps.hasOwnProperty(key)) {\n      oldElement.removeAttribute(key);\n    }\n  }\n\n  // Only update the attributes that have changed\n  for (const [key, value] of Object.entries(newProps)) {\n    if (oldProps[key] != value) {\n      oldElement.setAttribute(key, value);\n    }\n  }\n}\n\nexport default domUpdateHtmlProps;\n","import didVirtualNodeChange from '../didVirtualNodeChange';\nimport domCreateNode from './domCreateNode';\nimport domUpdateHtmlProps from './domUpdateHtmlProps';\n\nfunction patch(\n  parent: HTMLElement,\n  oldNode: VirtualTreeNode,\n  newNode: VirtualTreeNode,\n  index: number,\n) {\n  const oldElement = parent.childNodes[index];\n\n  if (!oldNode) {\n    parent.appendChild(domCreateNode(newNode));\n    return;\n  }\n\n  if (!newNode) {\n    parent.removeChild(oldElement);\n    return;\n  }\n\n  if (!didVirtualNodeChange(oldNode, newNode)) {\n    parent.replaceChild(domCreateNode(newNode), oldElement);\n    return;\n  }\n\n  if (newNode.type === 'text') {\n    if (oldElement.nodeValue != newNode.text) {\n      oldElement.nodeValue = newNode.text;\n    }\n    return;\n  }\n\n  domUpdateHtmlProps(\n    oldNode as VirtualTreeElement,\n    newNode as VirtualTreeElement,\n    oldElement as HTMLElement,\n  );\n\n  oldNode = oldNode as VirtualTreeElement;\n  newNode = newNode as VirtualTreeElement;\n\n  const oldChildren = oldNode.children ?? [];\n  const newChildren = newNode.children ?? [];\n\n  // Build map of old children by id\n  const oldChildrenMap = new Map<\n    string,\n    { node: VirtualTreeNode; index: number }\n  >();\n  oldChildren.forEach((node, index) => {\n    if ('key' in node) oldChildrenMap.set(node.key!, { node, index });\n  });\n\n  // Build set of used old child keys\n  const usedOldChildKeys = new Set<string>();\n\n  // TODO: Can swap domIndex in favor for index i?\n  let domIndex = 0;\n\n  // Loop through new children and patch\n  for (let i = 0; i < newChildren!.length; i++) {\n    let newChild = newChildren![i];\n    let match = null;\n\n    // Look up corresponding old child with same key\n    if (\n      newChild.hasOwnProperty('key') &&\n      oldChildrenMap.has((newChild as VirtualTreeElement).key!)\n    ) {\n      match = oldChildrenMap.get((newChild as VirtualTreeElement).key!)!;\n    }\n    // TODO: Test this line. I think it will be buggy when oldChildren and newChildren have different lengths.\n    // else if(oldChildren[i]) {\n    //   match = { node: oldChildren[i], index: i };\n    // }\n\n    // If match found but already used, discard\n    if (\n      match &&\n      !usedOldChildKeys.has((match.node as VirtualTreeElement).key!)\n    ) {\n      match = null;\n    }\n\n    // If match found, patch\n    if (match) {\n      // Mark old child as used\n      usedOldChildKeys.add((match.node as VirtualTreeElement).key!);\n      // Ensure DOM order\n      const currentDomChild = oldElement.childNodes[domIndex] ?? null;\n      const matchDomChild = oldElement.childNodes[match.index] ?? null;\n      if (currentDomChild !== matchDomChild) {\n        oldElement.insertBefore(matchDomChild, currentDomChild);\n      }\n      // patch\n      patch(oldElement as HTMLElement, match.node, newChild, domIndex);\n    } else {\n      // Insert new child\n      const matchDomChild = oldElement.childNodes[domIndex] ?? null;\n      oldElement.insertBefore(domCreateNode(newChild), matchDomChild);\n    }\n\n    domIndex++;\n  }\n\n  // Remove extra old nodes\n  while (oldElement.childNodes.length > newChildren.length) {\n    oldElement.removeChild(oldElement.lastChild!);\n  }\n}\n\nexport default patch;\n","import devirtualizeSelection from '../devirtualizeSelection';\nimport domCreateNode from './domCreateNode';\nimport patch from './patch';\nimport vDocToVTree from '../vDocToVTree';\nimport virtualBuildIndex from '../virtualBuildIndex';\n\nfunction render(state: State): void {\n  const newTree = vDocToVTree(state.virtualDocument!);\n  const editorElement = state.editor.element;\n\n  // If no existing virtualTree, replace HTML\n  if (!state.virtualTree) {\n    const newChildren = (newTree?.children ?? []).map(domCreateNode);\n    editorElement.replaceChildren(...newChildren);\n  } else {\n    const oldChildren = state.virtualTree.children ?? [];\n    const newChildren = newTree.children ?? [];\n\n    for (let i = 0; i < newChildren.length; i++) {\n      patch(editorElement, oldChildren[i], newChildren[i], i);\n    }\n\n    while (editorElement.childNodes.length > newChildren.length) {\n      editorElement.removeChild(editorElement.lastChild!);\n    }\n  }\n\n  state.virtualTree = newTree;\n  state.virtualIndex = virtualBuildIndex(state);\n\n  devirtualizeSelection(state);\n}\n\nexport default render;\n","/**\n * Trims leading whitespace from the first inline element and trailing whitespace\n * from the last inline element within a virtual block.\n *\n * @param block - The virtual block whose inline children will have whitespace trimmed\n * @returns The modified virtual block with trimmed whitespace on boundary inline elements\n *\n * @remarks\n * If the block has no children, it is returned unchanged.\n * This function mutates the text property of the first and last inline children.\n *\n * @example\n * ```typescript\n * const block = {\n *   children: [\n *     { text: '  Hello' },\n *     { text: 'World  ' }\n *   ]\n * };\n * const trimmed = trimVirtualBlockWhiteSpace(block);\n * // block.children[0].text is now 'Hello'\n * // block.children[1].text is now 'World'\n * ```\n */\nconst trimVirtualBlockWhiteSpace = (block: VirtualBlock): VirtualBlock => {\n  if (block.children.length === 0) {\n    return block;\n  }\n  // Trim left side of first inline\n  const firstInline = block.children[0];\n  firstInline.text = firstInline.text.replace(/^\\s+/g, '');\n  // Trim right side of last inline\n  const lastInline = block.children[block.children.length - 1];\n  lastInline.text = lastInline.text.replace(/\\s+$/g, '');\n\n  return block;\n};\n\nexport default trimVirtualBlockWhiteSpace;\n","/**\n * Returns the ordered start and end positions from a given virtual selection.\n *\n * @param vSelection - The virtual selection object containing `anchor` and `focus` positions.\n * @returns An object with `startPosition` and `endPosition`, where `startPosition` is less than or equal to `endPosition`.\n * @throws {Error} If either `anchor` or `focus` is undefined in the provided selection.\n */\nconst getOrderedSelection = (\n  vSelection: VirtualSelection,\n): { startPosition: number; endPosition: number } => {\n  const { anchor, focus } = vSelection;\n  // If either is undefined, return both as undefined\n  if (anchor === undefined || focus === undefined) {\n    throw new Error(\n      'Both anchor and focus must be defined in virtual selection',\n    );\n  }\n  //\n  return anchor <= focus\n    ? { startPosition: anchor, endPosition: focus }\n    : { startPosition: focus, endPosition: anchor };\n};\n\nexport default getOrderedSelection;\n","import uid from './helpers/uid';\n\nconst vCreateBlock = (tag: string, children: any[] = []): VirtualBlock => {\n  return {\n    type: 'element',\n    id: uid(),\n    tag,\n    children,\n  };\n};\n\nexport default vCreateBlock;\n","import uid from './helpers/uid';\n\nconst vCreateInline = (\n  text: string,\n  marks: Record<string, any> = {},\n  options: VirtualizeOptions = {},\n): VirtualInline => {\n  if (options.convertNewlinesToSpaces) {\n    text = text.replace(/\\n/g, ' ');\n  }\n\n  if (options.shrinkConsecutiveSpaces) {\n    text = text.replace(/  +/g, ' ');\n  }\n\n  return {\n    type: 'inline',\n    id: uid(),\n    text,\n    marks,\n  };\n};\n\nexport default vCreateInline;\n","import { CHAR_ZERO_WIDTH_SPACE } from './constants';\n\nfunction vH(\n  tag: string,\n  props: Record<string, any> = {},\n  key: string,\n  children: VirtualTreeNode[] = [],\n): VirtualTreeElement {\n  return {\n    type: 'element',\n    tag,\n    props,\n    children,\n    key,\n  };\n}\n\nfunction vT(text: string): VirtualTreeText {\n  return {\n    type: 'text',\n    text: text ?? '',\n  };\n}\n\nconst vDocToVTree = (vDoc: VirtualDocument): VirtualTree => {\n  const blockNodes = vDoc.blocks.map((block) =>\n    vH(\n      block.tag,\n      { 'data-id': block.id },\n      block.id,\n      block.children.map((inline) => {\n        const text =\n          inline.text.length === 0 ? CHAR_ZERO_WIDTH_SPACE : inline.text;\n\n        const tag = inline.marks['bold'] == true ? 'b' : 'span';\n\n        return vH(tag, { 'data-id': inline.id }, inline.id, [vT(text)]);\n      }),\n    ),\n  );\n\n  return vH('div', {}, 'root', blockNodes) as VirtualTree;\n};\n\nexport default vDocToVTree;\n","/**\n * Compares two virtual inline elements to determine if they have identical marks.\n *\n * @param inlineA - The first virtual inline element to compare\n * @param inlineB - The second virtual inline element to compare\n * @returns `true` if both inlines have the same marks with identical values, `false` otherwise\n *\n * @remarks\n * This function performs a deep comparison of the marks objects:\n * - Returns `false` if the number of marks differs between the two inlines\n * - Returns `false` if any mark key exists in one inline but not the other\n * - Returns `false` if any mark value differs between the two inlines\n * - Returns `true` only when all marks and their values match exactly\n *\n * @example\n * ```typescript\n * const inline1 = { marks: { bold: true, italic: true } };\n * const inline2 = { marks: { bold: true, italic: true } };\n * vInlinesHaveSameMarks(inline1, inline2); // returns true\n *\n * const inline3 = { marks: { bold: true } };\n * vInlinesHaveSameMarks(inline1, inline3); // returns false\n * ```\n */\nconst vInlinesHaveSameMarks = (\n  inlineA: VirtualInline,\n  inlineB: VirtualInline,\n): boolean => {\n  // Get marks as entries\n  const marksA = Object.entries(inlineA?.marks ?? {});\n  const marksB = Object.entries(inlineB?.marks ?? {});\n  // If different number of marks, not same\n  if (marksA.length !== marksB.length) {\n    return false;\n  }\n  // Check each mark key and value\n  for (const [key, value] of marksA) {\n    // If key not in inlineB, not same\n    if (inlineB.marks.hasOwnProperty(key) === false) {\n      return false;\n    }\n    // If value different, not same\n    if (inlineB.marks[key] !== value) {\n      return false;\n    }\n  }\n  // All marks match\n  return true;\n};\n\nexport default vInlinesHaveSameMarks;\n","const virtualBuildIndex = (state: State): VirtualIndex => {\n  const blocks = [];\n  const inlineById = new Map();\n  let globalPosition = 0;\n  const virtualBlocks = state.virtualDocument?.blocks ?? [];\n\n  for (let blockIndex = 0; blockIndex < virtualBlocks.length; blockIndex++) {\n    const block = virtualBlocks[blockIndex];\n    let blockPosition = 0;\n    const virtualInlineIndexes = [];\n\n    const virtualBlockIndex = {\n      blockIndex,\n      id: block.id,\n      globalPosition,\n    };\n\n    for (\n      let inlineIndex = 0;\n      inlineIndex < block.children.length;\n      inlineIndex++\n    ) {\n      const inline = block.children[inlineIndex];\n      const virtualInlineIndex = {\n        blockIndex,\n        inlineIndex,\n        globalPosition,\n        blockPosition,\n        length: inline.text.length,\n        id: inline.id,\n      };\n\n      inlineById.set(inline.id, virtualInlineIndex);\n      virtualInlineIndexes.push(virtualInlineIndex);\n\n      blockPosition += inline.text.length;\n      globalPosition += inline.text.length;\n    }\n\n    blocks.push({\n      ...virtualBlockIndex,\n      length: blockPosition,\n      inlines: virtualInlineIndexes,\n    });\n\n    globalPosition += +1;\n  }\n\n  return {\n    blocks,\n    inlineById,\n    globalLength: Math.max(0, globalPosition - 1),\n  };\n};\n\nexport default virtualBuildIndex;\n","import { CHAR_ZERO_WIDTH_SPACE } from './constants';\nimport domGenerateMarks from './domGenerateMarks';\nimport vCreateBlock from './vCreateBlock';\nimport vCreateInline from './vCreateInline';\nimport vInlinesHaveSameMarks from './vInlinesHaveSameMarks';\n\nconst virtualizeBlock = (\n  blockNode: Node,\n  options: VirtualizeOptions = {},\n): VirtualBlock => {\n  // If text node, create a paragraph block and wrap text\n  if (blockNode.nodeType === Node.TEXT_NODE) {\n    let text = blockNode.textContent ?? '';\n    return vCreateBlock('p', [vCreateInline(text, {}, options)]);\n  }\n\n  // If not an element node at this point, throw error\n  if (blockNode.nodeType !== Node.ELEMENT_NODE) {\n    throw new Error('Unsupported node type in editor');\n  }\n\n  const elementBlockNode = blockNode as HTMLElement;\n\n  // Create a TreeWalker to traverse text nodes and <br> elements\n  const walker = document.createTreeWalker(\n    elementBlockNode,\n    NodeFilter.SHOW_ELEMENT | NodeFilter.SHOW_TEXT,\n    {\n      acceptNode: (node: Node) => {\n        // If text node or br element, accept\n        if (\n          node.nodeType === Node.TEXT_NODE ||\n          (node.nodeType === Node.ELEMENT_NODE &&\n            (node as HTMLElement).tagName == 'BR')\n        ) {\n          return NodeFilter.FILTER_ACCEPT;\n        }\n        // else, skip\n        return NodeFilter.FILTER_SKIP;\n      },\n    },\n  );\n\n  // Iterate through accepted nodes and add to block children\n  const newChildren = [];\n  let n;\n  while ((n = walker.nextNode())) {\n    // If text node, add text inline\n    if (\n      n.nodeType === Node.ELEMENT_NODE &&\n      (n as HTMLElement).tagName === 'BR'\n    ) {\n      newChildren.push(vCreateInline('\\n', {}, options));\n    }\n\n    // Rest of the nodes must be text nodes\n    if (n.nodeType !== Node.TEXT_NODE) {\n      throw new Error('Unsupported node type in virtualizeBlock');\n    }\n\n    // TODO: experiment with CHAR_ZERO_WIDTH_SPACE handling\n    let text = n.textContent ?? '';\n    text = text == CHAR_ZERO_WIDTH_SPACE ? '' : text;\n    newChildren.push(vCreateInline(text, domGenerateMarks(n), options));\n  }\n\n  // Merge consecutive text inlines\n  const mergedChildren = [] as VirtualInline[];\n  for (const child of newChildren) {\n    // Ignore null/undefined text\n    if (!child.text) continue;\n    // Keep reference to previous merged child\n    const prevMergedChild = mergedChildren[mergedChildren.length - 1];\n    // Combine text nodes with same marks, else add new\n    if (prevMergedChild && vInlinesHaveSameMarks(prevMergedChild, child)) {\n      prevMergedChild.text += child.text;\n    } else {\n      mergedChildren.push(child);\n    }\n  }\n\n  return vCreateBlock(\n    'p',\n    mergedChildren.length > 0 ? mergedChildren : [vCreateInline('')],\n  );\n};\n\nexport default virtualizeBlock;\n","import trimVirtualBlockWhiteSpace from './trimVirtualBlockWhiteSpace';\nimport virtualizeBlock from './virtualizeBlock';\n\nfunction virtualizeDOM(\n  editorElement: HTMLElement,\n  options: VirtualizeOptions = {},\n): VirtualDocument {\n  // TODO: reexamine filtering logic\n  // Filter out text nodes that are empty or only whitespace\n  const nonEmptyBlockNodes = Array.from(editorElement.childNodes).filter(\n    (n) => {\n      return !(n.nodeType == Node.TEXT_NODE && !/\\S/.test(n.textContent ?? ''));\n    },\n  );\n\n  const vDoc: VirtualDocument = {\n    type: 'document',\n    blocks: nonEmptyBlockNodes.map((bn) => virtualizeBlock(bn, options)),\n  };\n\n  if (options.trimBlockWhiteSpace) {\n    vDoc.blocks = vDoc.blocks.map(trimVirtualBlockWhiteSpace);\n  }\n\n  return vDoc;\n}\n\nexport default virtualizeDOM;\n","import getVirtualSelectionMarks from './actions/getVirtualSelectionMarks';\nimport { CHAR_ZERO_WIDTH_SPACE } from './constants';\nimport { domIsSelectionInEditor } from './domIsSelectionInEditor';\nimport { clamp } from './helpers/clamp';\n\nfunction domNextNodeWithinRoot(root: Node, node: Node | null): Node | null {\n  if (!node) return null;\n  if (node.firstChild) return node.firstChild;\n  while (node && node !== root) {\n    if (node.nextSibling) return node.nextSibling;\n    node = node.parentNode;\n  }\n  return null;\n}\n\nfunction domNextLeafWithinRoot(root: HTMLElement, node: Node): Node | null {\n  let n = node as Node | null;\n  while ((n = domNextNodeWithinRoot(root, n))) {\n    if (n === null) return null;\n    if (n.nodeType === Node.TEXT_NODE) return n;\n    if (n.nodeType === Node.ELEMENT_NODE && (n as HTMLElement).tagName === 'BR')\n      return n;\n  }\n  return null;\n}\n\nfunction domFirstLeaf(node: Node): Node | null {\n  // If node is null, return null\n  if (!node) return null;\n  // If text node, return node\n  if (node.nodeType === Node.TEXT_NODE) return node;\n  // TODO: this case would never fire, consider removing\n  // If BR element node, return node\n  if (\n    node.nodeType === Node.ELEMENT_NODE &&\n    (node as HTMLElement).tagName === 'BR'\n  )\n    return node;\n\n  // TODO: convert to iterative to avoid deep recursion\n  // Check children recursively for first leaf\n  for (const child of Array.from(node.childNodes)) {\n    const leaf = domFirstLeaf(child);\n    if (leaf) return leaf;\n  }\n  // If no leaf found, return null\n  return null;\n}\n\nfunction domNextLeafPoint(\n  root: HTMLElement,\n  node: Node,\n  offset: number,\n): DomPoint | null {\n  if (!node) return null;\n\n  // If text node, return its info\n  if (node.nodeType === Node.TEXT_NODE) {\n    return { node, offset };\n  }\n\n  if (node.nodeType !== Node.ELEMENT_NODE) {\n    throw new Error(`Unexpected node type \"${node.nodeType}\"`);\n  }\n\n  const element = node as HTMLElement;\n  // TODO: this case would never fire, consider removing\n  // If br html element, return as text node with offset 0\n  if (element.tagName === 'BR') {\n    return { node, offset: 0 };\n  }\n\n  const child = element.childNodes[offset];\n  if (child) {\n    let firstLeaf;\n    // Get first leaf of child at offset if it exists\n    firstLeaf = domFirstLeaf(child);\n    if (firstLeaf) {\n      return { node: firstLeaf, offset: 0 };\n    }\n    // Else, find next leaf within root\n    const nextLeaf = domNextLeafWithinRoot(root, child);\n    if (nextLeaf) {\n      return { node: nextLeaf, offset: 0 };\n    }\n  }\n  // Else, find next leaf within root\n  const nextLeaf = domNextLeafWithinRoot(root, element);\n  if (nextLeaf) {\n    return { node: nextLeaf, offset: 0 };\n  }\n  // If no leaf found, return null\n  return null;\n}\n\nfunction domPrevNodeWithinRoot(root: Node, node: Node | null): Node | null {\n  if (!node) return null;\n  if (node.previousSibling) {\n    node = node.previousSibling;\n    // Go to the deepest last child\n    while (node.lastChild) {\n      node = node.lastChild;\n    }\n    return node;\n  }\n  if (node.parentNode && node.parentNode !== root) {\n    return node.parentNode;\n  }\n  return null;\n}\n\nfunction domPrevLeafWithinRoot(root: HTMLElement, node: Node): Node | null {\n  let n = node as Node | null;\n  while ((n = domPrevNodeWithinRoot(root, n))) {\n    if (n === null) return null;\n    if (n.nodeType === Node.TEXT_NODE) return n;\n    if (n.nodeType === Node.ELEMENT_NODE && (n as HTMLElement).tagName === 'BR')\n      return n;\n  }\n  return null;\n}\n\nfunction domLastLeaf(node: Node): Node | null {\n  // If node is null, return null\n  if (!node) return null;\n  // If text node, return node\n  if (node.nodeType === Node.TEXT_NODE) return node;\n  // TODO: this case would never fire, consider removing\n  // If BR element node, return node\n  if (\n    node.nodeType === Node.ELEMENT_NODE &&\n    (node as HTMLElement).tagName === 'BR'\n  )\n    return node;\n\n  // Check children recursively for last leaf\n  for (let i = node.childNodes.length - 1; i >= 0; i--) {\n    const child = node.childNodes[i];\n    const leaf = domLastLeaf(child);\n    if (leaf) return leaf;\n  }\n  // If no leaf found, return null\n  return null;\n}\n\nfunction domPrevLeafPoint(\n  root: HTMLElement,\n  node: Node,\n  offset: number,\n): DomPoint | null {\n  if (!node) return null;\n\n  // If text node, return its info\n  if (node.nodeType === Node.TEXT_NODE) {\n    return { node, offset };\n  }\n\n  if (node.nodeType !== Node.ELEMENT_NODE) {\n    throw new Error(`Unexpected node type \"${node.nodeType}\"`);\n  }\n\n  const element = node as HTMLElement;\n  // TODO: this case would never fire, consider removing\n  // If br html element, return as text node with offset 0\n  if (element.tagName === 'BR') {\n    return { node, offset: 0 };\n  }\n\n  const child = element.childNodes[offset - 1];\n  if (child) {\n    let lastleaf;\n    // Get last leaf of child at offset if it exists\n    lastleaf = domLastLeaf(child);\n    if (lastleaf) {\n      return { node: lastleaf, offset: (lastleaf.textContent ?? '').length };\n    }\n    // Else, find previous leaf within root\n    const prevLeaf = domPrevLeafWithinRoot(root, child);\n    if (prevLeaf) {\n      return {\n        node: prevLeaf,\n        offset: (prevLeaf.textContent ?? '').length,\n      };\n    }\n  }\n  // Else, find previous leaf within root\n  const prevLeaf = domPrevLeafWithinRoot(root, element);\n  if (prevLeaf) {\n    return { node: prevLeaf, offset: (prevLeaf.textContent ?? '').length };\n  }\n  // If no leaf found, return null\n  return null;\n}\n\nfunction leafLength(leaf: Node): number {\n  if (!leaf) return 0;\n  if (leaf.nodeType === Node.TEXT_NODE) {\n    const text = leaf.textContent ?? '';\n    return text == CHAR_ZERO_WIDTH_SPACE ? 0 : text.length;\n  }\n  if (\n    leaf.nodeType === Node.ELEMENT_NODE &&\n    (leaf as HTMLElement).tagName === 'BR'\n  ) {\n    return 1;\n  }\n  // TODO: didn't include the leaf.nodeType === Node.ELEMENT_NODE case in original, consider removing everywhere and rely on domIsValidDocument more\n\n  return 0;\n}\n\nfunction domLeafPointToVirtualOffset(\n  root: HTMLElement,\n  point: DomPoint,\n): number {\n  // Get blocks that are element nodes or non-empty text nodes\n  const blocks = Array.from(root.childNodes).filter(\n    (n) =>\n      n.nodeType === Node.ELEMENT_NODE ||\n      (n.nodeType === Node.TEXT_NODE && n?.nodeValue?.trim() !== ''),\n  );\n\n  let virtualOffset = 0;\n\n  for (const block of blocks) {\n    // Get walker for text nodes and br elements within block\n    const walker = document.createTreeWalker(\n      block,\n      NodeFilter.SHOW_TEXT | NodeFilter.SHOW_ELEMENT,\n      {\n        acceptNode: (node: Node) => {\n          return node.nodeType === Node.TEXT_NODE ||\n            (node.nodeType === Node.ELEMENT_NODE &&\n              (node as HTMLElement).tagName === 'BR')\n            ? NodeFilter.FILTER_ACCEPT\n            : NodeFilter.FILTER_SKIP;\n        },\n      },\n    );\n\n    let n = walker.nextNode();\n    while (n) {\n      if (n == point.node) {\n        // If text node\n        if (n.nodeType === Node.TEXT_NODE) {\n          const text = n.textContent ?? '';\n          // If zero-width space, return current virtual offset\n          if (text == CHAR_ZERO_WIDTH_SPACE) {\n            return virtualOffset;\n          } else {\n            // Else, return clamped offset within text length\n            return virtualOffset + clamp(point.offset, 0, text.length);\n          }\n        }\n        // If br element\n        return virtualOffset;\n      }\n      virtualOffset += leafLength(n);\n      n = walker.nextNode();\n    }\n\n    // For the new line between blocks\n    virtualOffset += 1;\n  }\n\n  // If point not found, return max offset\n  return Math.max(0, virtualOffset - 1);\n}\n\nexport function virtualizeSelection(state: State): VirtualSelection {\n  const selection = window.getSelection();\n\n  if (!domIsSelectionInEditor(selection!, state.editor.element)) {\n    return { isInsideEditor: false } as VirtualSelection;\n  }\n\n  const editorElement = state.editor.element;\n\n  // Check if anchor is equal to focus\n  if (\n    selection!.anchorNode === selection!.focusNode &&\n    selection!.anchorOffset === selection!.focusOffset\n  ) {\n    const caretLeaf = domNextLeafPoint(\n      editorElement,\n      selection!.anchorNode as Node,\n      selection!.anchorOffset,\n    );\n\n    if (!caretLeaf) {\n      return { isInsideEditor: false } as VirtualSelection;\n    }\n\n    const caretNode = domLeafPointToVirtualOffset(editorElement, caretLeaf);\n    const vSel = {\n      anchor: caretNode,\n      focus: caretNode,\n      isCollapsed: true,\n      isInsideEditor: true,\n      direction: 'none',\n    } as VirtualSelection;\n\n    vSel.marks = getVirtualSelectionMarks({\n      ...state,\n      virtualSelection: vSel as VirtualSelection,\n    });\n\n    return vSel;\n  }\n\n  const anchorLeaf = domNextLeafPoint(\n    editorElement,\n    selection!.anchorNode as Node,\n    selection!.anchorOffset,\n  );\n\n  const focusLeaf = domPrevLeafPoint(\n    editorElement,\n    selection!.focusNode as Node,\n    selection!.focusOffset,\n  );\n\n  if (!anchorLeaf || !focusLeaf) {\n    return { isInsideEditor: false } as VirtualSelection;\n  }\n\n  const anchor = domLeafPointToVirtualOffset(editorElement, anchorLeaf);\n  const focus = domLeafPointToVirtualOffset(editorElement, focusLeaf);\n\n\n  const vSel = {\n    anchor: anchor,\n    focus: focus,\n    isCollapsed: false,\n    isInsideEditor: true,\n    direction: anchor < focus ? 'forward' : 'backward',\n  } as VirtualSelection;\n\n  \n  vSel.marks = getVirtualSelectionMarks({\n    ...state,\n    virtualSelection: vSel as VirtualSelection,\n  });\n\n\n  return vSel\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Check if module exists (development only)\n\tif (__webpack_modules__[moduleId] === undefined) {\n\t\tvar e = new Error(\"Cannot find module '\" + moduleId + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(\"./src/index.ts\");\n",""],"names":[],"ignoreList":[],"sourceRoot":""}